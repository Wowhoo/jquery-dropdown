/*! jquery dropdown - v0.1.1 - 2013-11-13
* https://github.com/amazingSurge/jquery-dropdown
* Copyright (c) 2013 amazingSurge; Licensed MIT */
(function(t){var n=t.dropdown=function(i,e){this.element=i,this.$element=t(i),this.$parent=this.$element.parent();var o=[];t.each(this.$element.data(),function(t,n){var i=RegExp("^dropdown","i");i.test(t)&&(o[t.toLowerCase().replace(i,"")]=n)}),this.options=t.extend(!0,{},n.defaults,e,o),this.namespace=this.options.namespace,this.classes={skin:this.namespace+"_"+this.options.skin,show:this.namespace+"_show",trigger:this.namespace+"-trigger",panel:this.namespace+"-panel"},null!==this.options.skin&&this.$element.addClass(this.classes.skin),this.$panel=this._parse(this.options.panel),this.isShow=!1,this.enabled=!0,this.init()};n.prototype={constructor:n,init:function(){var t=this;this.$parent.css({position:"relative"}),this.$element.addClass(this.namespace).addClass(this.classes.trigger),this.$panel.addClass(this.classes.panel),this.$element.on("click.dropdown",function(){return t.toggle.call(t),!1}),"function"==typeof this.options.onInit&&this.options.onInit(this),this.$element.trigger("dropdown::init",this)},show:function(){this.enabled!==!1&&(this._bindActionEvent(),this.isShow=!0,this.$element.addClass(this.classes.show),this.$panel.addClass(this.classes.show),this._position(),"function"==typeof this.options.onShow&&this.options.onShow(this),this.$element.trigger("dropdown::show",this))},hide:function(){this.isShow=!1,this.$element.removeClass(this.classes.show),this.$panel.removeClass(this.classes.show),this._unbindActionEvent(),"function"==typeof this.options.onHide&&this.options.onHide(this),this.$element.trigger("dropdown::hide",this)},toggle:function(){this.isShow?this.hide():this.show()},_bindActionEvent:function(){var n=this;this.options.clickoutHide&&(n.$panel.on("click.dropdown","li",function(){return"function"==typeof n.options.onChange&&n.options.onChange(t(this)),n.$element.trigger("dropdown::onChange",t(this)),n.hide(),!1}).on("mousedown.dropdown",function(){return!1}),t(document).on("mousedown.dropdown",function(){return n.hide(),!1})),t(window).on("resize.dropdown",function(){return n._position(),!1})},_unbindActionEvent:function(){this.$panel.off("click.dropdown").off("mousedown.dropdown"),t(document).off("mousedown.dropdown"),t(window).off("resize.dropdown")},_position:function(){var n,i,e=this.$element.offset(),o=this.$element.outerHeight(),s=this.$element.outerWidth(),h=this.$panel.outerWidth(!0),d=this.$panel.outerHeight(!0);n=d+o+e.top>t(window).height()+t(window).scrollTop()?-d:o,i=h+e.left>t(window).width()+t(window).scrollLeft()?s-h:0,this.$panel.css({position:"absolute",top:n,left:i})},_parse:function(n){return n.indexOf("+")>=0?this.$element.next():t(this.options.panel)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destory:function(){this.hide(),this.$element.off(".dropdown"),this.$element.remove(),t(window).off(".dropdown")}},n.defaults={namespace:"dropdown",skin:null,panel:"+",clickoutHide:!0,onInit:null,onShow:null,onHide:null,onChange:null},t.fn.dropdown=function(i){if("string"==typeof i){var e=i,o=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var n=t.data(this,"dropdown");"function"==typeof n[e]&&n[e].apply(n,o)})}return this.each(function(){t.data(this,"dropdown")||t.data(this,"dropdown",new n(this,i))})}})(jQuery);